{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/config/app-config.ts"],"sourcesContent":["import packageJson from '../package.json';\n\nconst currentYear = new Date().getFullYear();\n\nexport const APP_CONFIG = {\n  name: 'FleetLink',\n  version: packageJson.version,\n  copyright: `© ${currentYear}, FleetLink.`,\n  meta: {\n    title: 'FleetLink - Reliable Equipment Rental',\n    description:\n      'FleetLink is a modern fully automated construction equipment rental platform. It handles all the payment and management processes so you can focus on your projects.',\n  },\n};\n\nexport const adminRedirectPath = '/admin/';\nexport const loginRedirectPath = '/dashboard/';\nexport const logoutRedirectPath = '/';\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,cAAc,IAAI,OAAO,WAAW;AAEnC,MAAM,aAAa;IACxB,MAAM;IACN,SAAS,8FAAA,CAAA,UAAW,CAAC,OAAO;IAC5B,WAAW,CAAC,EAAE,EAAE,YAAY,YAAY,CAAC;IACzC,MAAM;QACJ,OAAO;QACP,aACE;IACJ;AACF;AAEO,MAAM,oBAAoB;AAC1B,MAAM,oBAAoB;AAC1B,MAAM,qBAAqB","debugId":null}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Slot as SlotPrimitive } from \"radix-ui\";;\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\"\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\"\n      }\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\"\n    }\n  }\n);\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n  }) {\n  const Comp = asChild ? SlotPrimitive.Slot : \"button\";\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  );\n}\n\nexport { Button, buttonVariants };\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,8OAAA,CAAA,MAAG,AAAD,EACvB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,uUAAA,CAAA,OAAa,CAAC,IAAI,GAAG;IAE5C,qBACE,4VAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,8HAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS","debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Checkbox as CheckboxPrimitive } from \"radix-ui\"\nimport { CheckIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        \"peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"grid place-content-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,4VAAC,kaAAA,CAAA,WAAiB,CAAC,IAAI;QACrB,aAAU;QACV,WAAW,CAAA,GAAA,8HAAA,CAAA,KAAE,AAAD,EACV,+eACA;QAED,GAAG,KAAK;kBAET,cAAA,4VAAC,kaAAA,CAAA,WAAiB,CAAC,SAAS;YAC1B,aAAU;YACV,WAAU;sBAEV,cAAA,4VAAC,+RAAA,CAAA,YAAS;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI7B;KArBS","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/components/ui/label.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { Label as LabelPrimitive } from \"radix-ui\";;\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Label };\n"],"names":[],"mappings":";;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,4VAAC,kaAAA,CAAA,QAAc,CAAC,IAAI;QAClB,aAAU;QACV,WAAW,CAAA,GAAA,8HAAA,CAAA,KAAE,AAAD,EACV,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Label as LabelPrimitive, Slot as SlotPrimitive } from \"radix-ui\"\n\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  useFormState,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState } = useFormContext()\n  const formState = useFormState({ name: fieldContext.name })\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn(\"grid gap-2\", className)}\n        {...props}\n      />\n    </FormItemContext.Provider>\n  )\n}\n\nfunction FormLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      data-slot=\"form-label\"\n      data-error={!!error}\n      className={cn(\"data-[error=true]:text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n}\n\nfunction FormControl({ ...props }: React.ComponentProps<typeof SlotPrimitive.Slot>) {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <SlotPrimitive.Slot\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n}\n\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : props.children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn(\"text-destructive text-sm\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n}\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 390, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Input };\n"],"names":[],"mappings":";;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,4VAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,CAAA,GAAA,8HAAA,CAAA,KAAE,AAAD,EACV,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/app/%28login%29/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { and, eq, sql } from 'drizzle-orm';\nimport { db } from '@/lib/db/drizzle';\nimport {\n  User,\n  users,\n  teams,\n  teamMembers,\n  activityLogs,\n  type NewUser,\n  type NewTeam,\n  type NewTeamMember,\n  type NewActivityLog,\n  ActivityType,\n  invitations,\n} from '@/lib/db/schema';\nimport { comparePasswords, hashPassword, setSession } from '@/lib/auth/session';\nimport { redirect } from 'next/navigation';\nimport { cookies } from 'next/headers';\nimport { createCheckoutSession } from '@/lib/payments/stripe';\nimport { getUser, getUserWithTeam } from '@/lib/db/queries';\nimport { validatedAction, validatedActionWithUser } from '@/lib/auth/middleware';\nimport { loginRedirectPath } from '@/config/app-config';\n\nasync function logActivity(\n  teamId: number | null | undefined,\n  userId: number,\n  type: ActivityType,\n  ipAddress?: string\n) {\n  if (teamId === null || teamId === undefined) {\n    return;\n  }\n  const newActivity: NewActivityLog = {\n    teamId,\n    userId,\n    action: type,\n    ipAddress: ipAddress || '',\n  };\n  await db.insert(activityLogs).values(newActivity);\n}\n\nconst signInSchema = z.object({\n  email: z.string().email().min(3).max(255),\n  password: z.string().min(8).max(100),\n});\n\nexport const signIn = validatedAction(signInSchema, async (data, formData) => {\n  const { email, password } = data;\n\n  const userWithTeam = await db\n    .select({\n      user: users,\n      team: teams,\n    })\n    .from(users)\n    .leftJoin(teamMembers, eq(users.id, teamMembers.userId))\n    .leftJoin(teams, eq(teamMembers.teamId, teams.id))\n    .where(eq(users.email, email))\n    .limit(1);\n\n  if (userWithTeam.length === 0) {\n    return {\n      error: 'Invalid email or password. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  const { user: foundUser, team: foundTeam } = userWithTeam[0];\n\n  const isPasswordValid = await comparePasswords(password, foundUser.passwordHash);\n\n  if (!isPasswordValid) {\n    return {\n      error: 'Invalid email or password. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  await Promise.all([\n    setSession(foundUser),\n    logActivity(foundTeam?.id, foundUser.id, ActivityType.SIGN_IN),\n  ]);\n\n  const redirectTo = formData.get('redirect') as string | null;\n  if (redirectTo === 'checkout') {\n    const priceId = formData.get('priceId') as string;\n    return createCheckoutSession({ team: foundTeam, priceId });\n  }\n\n  redirect(loginRedirectPath);\n});\n\nconst signUpSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n  inviteId: z.string().optional(),\n});\n\nexport const signUp = validatedAction(signUpSchema, async (data, formData) => {\n  const { email, password, inviteId } = data;\n\n  const existingUser = await db.select().from(users).where(eq(users.email, email)).limit(1);\n\n  if (existingUser.length > 0) {\n    return {\n      error: 'Failed to create user. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  const passwordHash = await hashPassword(password);\n\n  const newUser: NewUser = {\n    email,\n    passwordHash,\n    role: 'owner', // Default role, will be overridden if there's an invitation\n  };\n\n  const [createdUser] = await db.insert(users).values(newUser).returning();\n\n  if (!createdUser) {\n    return {\n      error: 'Failed to create user. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  let teamId: number;\n  let userRole: string;\n  let createdTeam: typeof teams.$inferSelect | null = null;\n\n  if (inviteId) {\n    // Check if there's a valid invitation\n    const [invitation] = await db\n      .select()\n      .from(invitations)\n      .where(\n        and(\n          eq(invitations.id, parseInt(inviteId)),\n          eq(invitations.email, email),\n          eq(invitations.status, 'pending')\n        )\n      )\n      .limit(1);\n\n    if (invitation) {\n      teamId = invitation.teamId;\n      userRole = invitation.role;\n\n      await db\n        .update(invitations)\n        .set({ status: 'accepted' })\n        .where(eq(invitations.id, invitation.id));\n\n      await logActivity(teamId, createdUser.id, ActivityType.ACCEPT_INVITATION);\n\n      [createdTeam] = await db.select().from(teams).where(eq(teams.id, teamId)).limit(1);\n    } else {\n      return { error: 'Invalid or expired invitation.', email, password };\n    }\n  } else {\n    // Create a new team if there's no invitation\n    const newTeam: NewTeam = {\n      name: `${email}'s Team`,\n    };\n\n    [createdTeam] = await db.insert(teams).values(newTeam).returning();\n\n    if (!createdTeam) {\n      return {\n        error: 'Failed to create team. Please try again.',\n        email,\n        password,\n      };\n    }\n\n    teamId = createdTeam.id;\n    userRole = 'owner';\n\n    await logActivity(teamId, createdUser.id, ActivityType.CREATE_TEAM);\n  }\n\n  const newTeamMember: NewTeamMember = {\n    userId: createdUser.id,\n    teamId: teamId,\n    role: userRole,\n  };\n\n  await Promise.all([\n    db.insert(teamMembers).values(newTeamMember),\n    logActivity(teamId, createdUser.id, ActivityType.SIGN_UP),\n    setSession(createdUser),\n  ]);\n\n  const redirectTo = formData.get('redirect') as string | null;\n  if (redirectTo === 'checkout') {\n    const priceId = formData.get('priceId') as string;\n    return createCheckoutSession({ team: createdTeam, priceId });\n  }\n\n  redirect(loginRedirectPath);\n});\n\nexport async function signOut() {\n  const user = (await getUser()) as User;\n  const userWithTeam = await getUserWithTeam(user.id);\n  await logActivity(userWithTeam?.teamId, user.id, ActivityType.SIGN_OUT);\n  (await cookies()).delete('session');\n}\n\nconst updatePasswordSchema = z.object({\n  currentPassword: z.string().min(8).max(100),\n  newPassword: z.string().min(8).max(100),\n  confirmPassword: z.string().min(8).max(100),\n});\n\nexport const updatePassword = validatedActionWithUser(\n  updatePasswordSchema,\n  async (data, _, user) => {\n    const { currentPassword, newPassword, confirmPassword } = data;\n\n    const isPasswordValid = await comparePasswords(currentPassword, user.passwordHash);\n\n    if (!isPasswordValid) {\n      return {\n        currentPassword,\n        newPassword,\n        confirmPassword,\n        error: 'Current password is incorrect.',\n      };\n    }\n\n    if (currentPassword === newPassword) {\n      return {\n        currentPassword,\n        newPassword,\n        confirmPassword,\n        error: 'New password must be different from the current password.',\n      };\n    }\n\n    if (confirmPassword !== newPassword) {\n      return {\n        currentPassword,\n        newPassword,\n        confirmPassword,\n        error: 'New password and confirmation password do not match.',\n      };\n    }\n\n    const newPasswordHash = await hashPassword(newPassword);\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    await Promise.all([\n      db.update(users).set({ passwordHash: newPasswordHash }).where(eq(users.id, user.id)),\n      logActivity(userWithTeam?.teamId, user.id, ActivityType.UPDATE_PASSWORD),\n    ]);\n\n    return {\n      success: 'Password updated successfully.',\n    };\n  }\n);\n\nconst deleteAccountSchema = z.object({\n  password: z.string().min(8).max(100),\n});\n\nexport const deleteAccount = validatedActionWithUser(deleteAccountSchema, async (data, _, user) => {\n  const { password } = data;\n\n  const isPasswordValid = await comparePasswords(password, user.passwordHash);\n  if (!isPasswordValid) {\n    return {\n      password,\n      error: 'Incorrect password. Account deletion failed.',\n    };\n  }\n\n  const userWithTeam = await getUserWithTeam(user.id);\n\n  await logActivity(userWithTeam?.teamId, user.id, ActivityType.DELETE_ACCOUNT);\n\n  // Soft delete\n  await db\n    .update(users)\n    .set({\n      deletedAt: sql`CURRENT_TIMESTAMP`,\n      email: sql`CONCAT(email, '-', id, '-deleted')`, // Ensure email uniqueness\n    })\n    .where(eq(users.id, user.id));\n\n  if (userWithTeam?.teamId) {\n    await db\n      .delete(teamMembers)\n      .where(and(eq(teamMembers.userId, user.id), eq(teamMembers.teamId, userWithTeam.teamId)));\n  }\n\n  (await cookies()).delete('session');\n  redirect('/sign-in');\n});\n\nconst updateAccountSchema = z.object({\n  name: z.string().min(1, 'Name is required').max(100),\n  email: z.string().email('Invalid email address'),\n});\n\nexport const updateAccount = validatedActionWithUser(updateAccountSchema, async (data, _, user) => {\n  const { name, email } = data;\n  const userWithTeam = await getUserWithTeam(user.id);\n\n  await Promise.all([\n    db.update(users).set({ name, email }).where(eq(users.id, user.id)),\n    logActivity(userWithTeam?.teamId, user.id, ActivityType.UPDATE_ACCOUNT),\n  ]);\n\n  return { name, success: 'Account updated successfully.' };\n});\n\nconst removeTeamMemberSchema = z.object({\n  memberId: z.number(),\n});\n\nexport const removeTeamMember = validatedActionWithUser(\n  removeTeamMemberSchema,\n  async (data, _, user) => {\n    const { memberId } = data;\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    if (!userWithTeam?.teamId) {\n      return { error: 'User is not part of a team' };\n    }\n\n    await db\n      .delete(teamMembers)\n      .where(and(eq(teamMembers.id, memberId), eq(teamMembers.teamId, userWithTeam.teamId)));\n\n    await logActivity(userWithTeam.teamId, user.id, ActivityType.REMOVE_TEAM_MEMBER);\n\n    return { success: 'Team member removed successfully' };\n  }\n);\n\nconst inviteTeamMemberSchema = z.object({\n  email: z.string().email('Invalid email address'),\n  role: z.enum(['member', 'owner']),\n});\n\nexport const inviteTeamMember = validatedActionWithUser(\n  inviteTeamMemberSchema,\n  async (data, _, user) => {\n    const { email, role } = data;\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    if (!userWithTeam?.teamId) {\n      return { error: 'User is not part of a team' };\n    }\n\n    const existingMember = await db\n      .select()\n      .from(users)\n      .leftJoin(teamMembers, eq(users.id, teamMembers.userId))\n      .where(and(eq(users.email, email), eq(teamMembers.teamId, userWithTeam.teamId)))\n      .limit(1);\n\n    if (existingMember.length > 0) {\n      return { error: 'User is already a member of this team' };\n    }\n\n    // Check if there's an existing invitation\n    const existingInvitation = await db\n      .select()\n      .from(invitations)\n      .where(\n        and(\n          eq(invitations.email, email),\n          eq(invitations.teamId, userWithTeam.teamId),\n          eq(invitations.status, 'pending')\n        )\n      )\n      .limit(1);\n\n    if (existingInvitation.length > 0) {\n      return { error: 'An invitation has already been sent to this email' };\n    }\n\n    // Create a new invitation\n    await db.insert(invitations).values({\n      teamId: userWithTeam.teamId,\n      email,\n      role,\n      invitedBy: user.id,\n      status: 'pending',\n    });\n\n    await logActivity(userWithTeam.teamId, user.id, ActivityType.INVITE_TEAM_MEMBER);\n\n    // TODO: Send invitation email and include ?inviteId={id} to sign-up URL\n    // await sendInvitationEmail(email, userWithTeam.team.name, role)\n\n    return { success: 'Invitation sent successfully' };\n  }\n);\n"],"names":[],"mappings":";;;;;;IAiDa,SAAA,WAAA,GAAA,CAAA,GAAA,wWAAA,CAAA,wBAAA,EAAA,8CAAA,wWAAA,CAAA,aAAA,EAAA,KAAA,GAAA,wWAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 438, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/app/%28login%29/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { and, eq, sql } from 'drizzle-orm';\nimport { db } from '@/lib/db/drizzle';\nimport {\n  User,\n  users,\n  teams,\n  teamMembers,\n  activityLogs,\n  type NewUser,\n  type NewTeam,\n  type NewTeamMember,\n  type NewActivityLog,\n  ActivityType,\n  invitations,\n} from '@/lib/db/schema';\nimport { comparePasswords, hashPassword, setSession } from '@/lib/auth/session';\nimport { redirect } from 'next/navigation';\nimport { cookies } from 'next/headers';\nimport { createCheckoutSession } from '@/lib/payments/stripe';\nimport { getUser, getUserWithTeam } from '@/lib/db/queries';\nimport { validatedAction, validatedActionWithUser } from '@/lib/auth/middleware';\nimport { loginRedirectPath } from '@/config/app-config';\n\nasync function logActivity(\n  teamId: number | null | undefined,\n  userId: number,\n  type: ActivityType,\n  ipAddress?: string\n) {\n  if (teamId === null || teamId === undefined) {\n    return;\n  }\n  const newActivity: NewActivityLog = {\n    teamId,\n    userId,\n    action: type,\n    ipAddress: ipAddress || '',\n  };\n  await db.insert(activityLogs).values(newActivity);\n}\n\nconst signInSchema = z.object({\n  email: z.string().email().min(3).max(255),\n  password: z.string().min(8).max(100),\n});\n\nexport const signIn = validatedAction(signInSchema, async (data, formData) => {\n  const { email, password } = data;\n\n  const userWithTeam = await db\n    .select({\n      user: users,\n      team: teams,\n    })\n    .from(users)\n    .leftJoin(teamMembers, eq(users.id, teamMembers.userId))\n    .leftJoin(teams, eq(teamMembers.teamId, teams.id))\n    .where(eq(users.email, email))\n    .limit(1);\n\n  if (userWithTeam.length === 0) {\n    return {\n      error: 'Invalid email or password. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  const { user: foundUser, team: foundTeam } = userWithTeam[0];\n\n  const isPasswordValid = await comparePasswords(password, foundUser.passwordHash);\n\n  if (!isPasswordValid) {\n    return {\n      error: 'Invalid email or password. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  await Promise.all([\n    setSession(foundUser),\n    logActivity(foundTeam?.id, foundUser.id, ActivityType.SIGN_IN),\n  ]);\n\n  const redirectTo = formData.get('redirect') as string | null;\n  if (redirectTo === 'checkout') {\n    const priceId = formData.get('priceId') as string;\n    return createCheckoutSession({ team: foundTeam, priceId });\n  }\n\n  redirect(loginRedirectPath);\n});\n\nconst signUpSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n  inviteId: z.string().optional(),\n});\n\nexport const signUp = validatedAction(signUpSchema, async (data, formData) => {\n  const { email, password, inviteId } = data;\n\n  const existingUser = await db.select().from(users).where(eq(users.email, email)).limit(1);\n\n  if (existingUser.length > 0) {\n    return {\n      error: 'Failed to create user. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  const passwordHash = await hashPassword(password);\n\n  const newUser: NewUser = {\n    email,\n    passwordHash,\n    role: 'owner', // Default role, will be overridden if there's an invitation\n  };\n\n  const [createdUser] = await db.insert(users).values(newUser).returning();\n\n  if (!createdUser) {\n    return {\n      error: 'Failed to create user. Please try again.',\n      email,\n      password,\n    };\n  }\n\n  let teamId: number;\n  let userRole: string;\n  let createdTeam: typeof teams.$inferSelect | null = null;\n\n  if (inviteId) {\n    // Check if there's a valid invitation\n    const [invitation] = await db\n      .select()\n      .from(invitations)\n      .where(\n        and(\n          eq(invitations.id, parseInt(inviteId)),\n          eq(invitations.email, email),\n          eq(invitations.status, 'pending')\n        )\n      )\n      .limit(1);\n\n    if (invitation) {\n      teamId = invitation.teamId;\n      userRole = invitation.role;\n\n      await db\n        .update(invitations)\n        .set({ status: 'accepted' })\n        .where(eq(invitations.id, invitation.id));\n\n      await logActivity(teamId, createdUser.id, ActivityType.ACCEPT_INVITATION);\n\n      [createdTeam] = await db.select().from(teams).where(eq(teams.id, teamId)).limit(1);\n    } else {\n      return { error: 'Invalid or expired invitation.', email, password };\n    }\n  } else {\n    // Create a new team if there's no invitation\n    const newTeam: NewTeam = {\n      name: `${email}'s Team`,\n    };\n\n    [createdTeam] = await db.insert(teams).values(newTeam).returning();\n\n    if (!createdTeam) {\n      return {\n        error: 'Failed to create team. Please try again.',\n        email,\n        password,\n      };\n    }\n\n    teamId = createdTeam.id;\n    userRole = 'owner';\n\n    await logActivity(teamId, createdUser.id, ActivityType.CREATE_TEAM);\n  }\n\n  const newTeamMember: NewTeamMember = {\n    userId: createdUser.id,\n    teamId: teamId,\n    role: userRole,\n  };\n\n  await Promise.all([\n    db.insert(teamMembers).values(newTeamMember),\n    logActivity(teamId, createdUser.id, ActivityType.SIGN_UP),\n    setSession(createdUser),\n  ]);\n\n  const redirectTo = formData.get('redirect') as string | null;\n  if (redirectTo === 'checkout') {\n    const priceId = formData.get('priceId') as string;\n    return createCheckoutSession({ team: createdTeam, priceId });\n  }\n\n  redirect(loginRedirectPath);\n});\n\nexport async function signOut() {\n  const user = (await getUser()) as User;\n  const userWithTeam = await getUserWithTeam(user.id);\n  await logActivity(userWithTeam?.teamId, user.id, ActivityType.SIGN_OUT);\n  (await cookies()).delete('session');\n}\n\nconst updatePasswordSchema = z.object({\n  currentPassword: z.string().min(8).max(100),\n  newPassword: z.string().min(8).max(100),\n  confirmPassword: z.string().min(8).max(100),\n});\n\nexport const updatePassword = validatedActionWithUser(\n  updatePasswordSchema,\n  async (data, _, user) => {\n    const { currentPassword, newPassword, confirmPassword } = data;\n\n    const isPasswordValid = await comparePasswords(currentPassword, user.passwordHash);\n\n    if (!isPasswordValid) {\n      return {\n        currentPassword,\n        newPassword,\n        confirmPassword,\n        error: 'Current password is incorrect.',\n      };\n    }\n\n    if (currentPassword === newPassword) {\n      return {\n        currentPassword,\n        newPassword,\n        confirmPassword,\n        error: 'New password must be different from the current password.',\n      };\n    }\n\n    if (confirmPassword !== newPassword) {\n      return {\n        currentPassword,\n        newPassword,\n        confirmPassword,\n        error: 'New password and confirmation password do not match.',\n      };\n    }\n\n    const newPasswordHash = await hashPassword(newPassword);\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    await Promise.all([\n      db.update(users).set({ passwordHash: newPasswordHash }).where(eq(users.id, user.id)),\n      logActivity(userWithTeam?.teamId, user.id, ActivityType.UPDATE_PASSWORD),\n    ]);\n\n    return {\n      success: 'Password updated successfully.',\n    };\n  }\n);\n\nconst deleteAccountSchema = z.object({\n  password: z.string().min(8).max(100),\n});\n\nexport const deleteAccount = validatedActionWithUser(deleteAccountSchema, async (data, _, user) => {\n  const { password } = data;\n\n  const isPasswordValid = await comparePasswords(password, user.passwordHash);\n  if (!isPasswordValid) {\n    return {\n      password,\n      error: 'Incorrect password. Account deletion failed.',\n    };\n  }\n\n  const userWithTeam = await getUserWithTeam(user.id);\n\n  await logActivity(userWithTeam?.teamId, user.id, ActivityType.DELETE_ACCOUNT);\n\n  // Soft delete\n  await db\n    .update(users)\n    .set({\n      deletedAt: sql`CURRENT_TIMESTAMP`,\n      email: sql`CONCAT(email, '-', id, '-deleted')`, // Ensure email uniqueness\n    })\n    .where(eq(users.id, user.id));\n\n  if (userWithTeam?.teamId) {\n    await db\n      .delete(teamMembers)\n      .where(and(eq(teamMembers.userId, user.id), eq(teamMembers.teamId, userWithTeam.teamId)));\n  }\n\n  (await cookies()).delete('session');\n  redirect('/sign-in');\n});\n\nconst updateAccountSchema = z.object({\n  name: z.string().min(1, 'Name is required').max(100),\n  email: z.string().email('Invalid email address'),\n});\n\nexport const updateAccount = validatedActionWithUser(updateAccountSchema, async (data, _, user) => {\n  const { name, email } = data;\n  const userWithTeam = await getUserWithTeam(user.id);\n\n  await Promise.all([\n    db.update(users).set({ name, email }).where(eq(users.id, user.id)),\n    logActivity(userWithTeam?.teamId, user.id, ActivityType.UPDATE_ACCOUNT),\n  ]);\n\n  return { name, success: 'Account updated successfully.' };\n});\n\nconst removeTeamMemberSchema = z.object({\n  memberId: z.number(),\n});\n\nexport const removeTeamMember = validatedActionWithUser(\n  removeTeamMemberSchema,\n  async (data, _, user) => {\n    const { memberId } = data;\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    if (!userWithTeam?.teamId) {\n      return { error: 'User is not part of a team' };\n    }\n\n    await db\n      .delete(teamMembers)\n      .where(and(eq(teamMembers.id, memberId), eq(teamMembers.teamId, userWithTeam.teamId)));\n\n    await logActivity(userWithTeam.teamId, user.id, ActivityType.REMOVE_TEAM_MEMBER);\n\n    return { success: 'Team member removed successfully' };\n  }\n);\n\nconst inviteTeamMemberSchema = z.object({\n  email: z.string().email('Invalid email address'),\n  role: z.enum(['member', 'owner']),\n});\n\nexport const inviteTeamMember = validatedActionWithUser(\n  inviteTeamMemberSchema,\n  async (data, _, user) => {\n    const { email, role } = data;\n    const userWithTeam = await getUserWithTeam(user.id);\n\n    if (!userWithTeam?.teamId) {\n      return { error: 'User is not part of a team' };\n    }\n\n    const existingMember = await db\n      .select()\n      .from(users)\n      .leftJoin(teamMembers, eq(users.id, teamMembers.userId))\n      .where(and(eq(users.email, email), eq(teamMembers.teamId, userWithTeam.teamId)))\n      .limit(1);\n\n    if (existingMember.length > 0) {\n      return { error: 'User is already a member of this team' };\n    }\n\n    // Check if there's an existing invitation\n    const existingInvitation = await db\n      .select()\n      .from(invitations)\n      .where(\n        and(\n          eq(invitations.email, email),\n          eq(invitations.teamId, userWithTeam.teamId),\n          eq(invitations.status, 'pending')\n        )\n      )\n      .limit(1);\n\n    if (existingInvitation.length > 0) {\n      return { error: 'An invitation has already been sent to this email' };\n    }\n\n    // Create a new invitation\n    await db.insert(invitations).values({\n      teamId: userWithTeam.teamId,\n      email,\n      role,\n      invitedBy: user.id,\n      status: 'pending',\n    });\n\n    await logActivity(userWithTeam.teamId, user.id, ActivityType.INVITE_TEAM_MEMBER);\n\n    // TODO: Send invitation email and include ?inviteId={id} to sign-up URL\n    // await sendInvitationEmail(email, userWithTeam.team.name, role)\n\n    return { success: 'Invitation sent successfully' };\n  }\n);\n"],"names":[],"mappings":";;;;;;IAuGa,SAAA,WAAA,GAAA,CAAA,GAAA,wWAAA,CAAA,wBAAA,EAAA,8CAAA,wWAAA,CAAA,aAAA,EAAA,KAAA,GAAA,wWAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/app/%28login%29/login-form.tsx"],"sourcesContent":["'use client';\n\nimport { useActionState, useTransition } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { useForm } from 'react-hook-form';\nimport { z } from 'zod';\n\nimport { Button } from '@/components/ui/button';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Loader2 } from 'lucide-react';\nimport { signIn, signUp } from './actions';\nimport { ActionState } from '@/lib/auth/middleware';\n\nconst getFormSchema = (mode: 'signin' | 'signup') => {\n  const baseSchema = {\n    email: z.string().email({ message: 'Please enter a valid email address.' }),\n    password: z.string().min(6, { message: 'Password must be at least 6 characters.' }),\n  };\n\n  if (mode === 'signin') {\n    return z.object({\n      ...baseSchema,\n      remember: z.boolean().optional(),\n    });\n  }\n\n  return z\n    .object({\n      ...baseSchema,\n      confirmPassword: z\n        .string()\n        .min(6, { message: 'Confirm Password must be at least 6 characters.' }),\n    })\n    .refine(data => data.password === data.confirmPassword, {\n      message: 'Passwords do not match.',\n      path: ['confirmPassword'],\n    });\n};\n\ntype SignInFormData = z.infer<ReturnType<typeof getFormSchema>> & { remember?: boolean };\ntype SignUpFormData = z.infer<ReturnType<typeof getFormSchema>> & { confirmPassword: string };\n\nexport function AuthForm({ mode = 'signin' }: { mode?: 'signin' | 'signup' }) {\n  const searchParams = useSearchParams();\n  const redirect = searchParams.get('redirect');\n  const priceId = searchParams.get('priceId');\n  const inviteId = searchParams.get('inviteId');\n  const [isPending, startTransition] = useTransition();\n  const [state, formAction] = useActionState<ActionState, FormData>(\n    mode === 'signin' ? signIn : signUp,\n    { error: '' }\n  );\n\n  const formSchema = getFormSchema(mode);\n  const form = useForm<SignInFormData | SignUpFormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues:\n      mode === 'signin'\n        ? { email: '', password: '', remember: false }\n        : { email: '', password: '', confirmPassword: '' },\n  });\n\n  const onSubmit = async (data: SignInFormData | SignUpFormData) => {\n    startTransition(() => {\n      const formData = new FormData();\n      formData.append('email', data.email);\n      formData.append('password', data.password);\n      formData.append('redirect', redirect || '');\n      formData.append('priceId', priceId || '');\n      formData.append('inviteId', inviteId || '');\n\n      if (mode === 'signin' && 'remember' in data) {\n        formData.append('remember', String(data.remember || false));\n      }\n\n      formAction(formData);\n    });\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n        <FormField\n          control={form.control}\n          name=\"email\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Email Address</FormLabel>\n              <FormControl>\n                <Input\n                  id=\"email\"\n                  type=\"email\"\n                  placeholder=\"you@example.com\"\n                  autoComplete=\"email\"\n                  defaultValue={state.email}\n                  {...field}\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <FormField\n          control={form.control}\n          name=\"password\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Password</FormLabel>\n              <FormControl>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"••••••••\"\n                  autoComplete={mode === 'signin' ? 'current-password' : 'new-password'}\n                  defaultValue={state.password}\n                  {...field}\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {mode === 'signup' && (\n          <FormField\n            control={form.control}\n            name=\"confirmPassword\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Confirm Password</FormLabel>\n                <FormControl>\n                  <Input\n                    id=\"confirmPassword\"\n                    type=\"password\"\n                    placeholder=\"••••••••\"\n                    autoComplete=\"new-password\"\n                    {...field}\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        )}\n\n        {mode === 'signin' && (\n          <FormField\n            control={form.control}\n            name=\"remember\"\n            render={({ field }) => (\n              <FormItem className=\"flex flex-row items-center\">\n                <FormControl>\n                  <Checkbox\n                    id=\"login-remember\"\n                    checked={field.value}\n                    onCheckedChange={field.onChange}\n                    className=\"size-4\"\n                  />\n                </FormControl>\n                <FormLabel\n                  htmlFor=\"login-remember\"\n                  className=\"text-muted-foreground ml-1 text-sm font-medium\"\n                >\n                  Remember me for 30 days\n                </FormLabel>\n              </FormItem>\n            )}\n          />\n        )}\n\n        {state?.error && <div className=\"text-red-500 text-sm\">{state.error}</div>}\n\n        <Button className=\"w-full\" type=\"submit\" disabled={isPending}>\n          {isPending ? (\n            <>\n              <Loader2 className=\"animate-spin mr-2 h-4 w-4\" />\n              Loading...\n            </>\n          ) : mode === 'signin' ? (\n            'Sign in'\n          ) : (\n            'Sign up'\n          )}\n        </Button>\n      </form>\n    </Form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 794, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/components/ui/simple-icon.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nimport type { SimpleIcon } from \"simple-icons\";\n\nimport { cn } from \"@/lib/utils\";\n\ntype SimpleIconProps = {\n  icon: SimpleIcon;\n  className?: string;\n} & React.SVGProps<SVGSVGElement>;\n\nexport function SimpleIcon({ icon, className, ...props }: SimpleIconProps) {\n  const { title, path } = icon;\n\n  return (\n    <svg\n      viewBox=\"0 0 24 24\"\n      aria-label={title}\n      aria-hidden=\"false\"\n      focusable=\"false\"\n      className={cn(\"fill-foreground size-5\", className)}\n      {...props}\n    >\n      <title>{title}</title>\n      <path d={path} />\n    </svg>\n  );\n}\n"],"names":[],"mappings":";;;;AAMA;AANA;;;AAaO,SAAS,WAAW,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,OAAwB;IACvE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG;IAExB,qBACE,4VAAC;QACC,SAAQ;QACR,cAAY;QACZ,eAAY;QACZ,WAAU;QACV,WAAW,CAAA,GAAA,8HAAA,CAAA,KAAE,AAAD,EAAE,0BAA0B;QACvC,GAAG,KAAK;;0BAET,4VAAC;0BAAO;;;;;;0BACR,4VAAC;gBAAK,GAAG;;;;;;;;;;;;AAGf;KAhBgB","debugId":null}},
    {"offset": {"line": 845, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/components/ui/google-button.tsx"],"sourcesContent":["import { siGoogle } from \"simple-icons\";\n\nimport { SimpleIcon } from \"@/components/ui/simple-icon\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\nexport function GoogleButton({ className, ...props }: React.ComponentProps<typeof Button>) {\n  return (\n    <Button variant=\"secondary\" className={cn(className)} {...props}>\n      <SimpleIcon icon={siGoogle} className=\"size-4\" />\n      Continue with Google\n    </Button>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;AACA;;;;;;AAEO,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAA4C;IACvF,qBACE,4VAAC,6IAAA,CAAA,SAAM;QAAC,SAAQ;QAAY,WAAW,CAAA,GAAA,8HAAA,CAAA,KAAE,AAAD,EAAE;QAAa,GAAG,KAAK;;0BAC7D,4VAAC,qJAAA,CAAA,aAAU;gBAAC,MAAM,0MAAA,CAAA,WAAQ;gBAAE,WAAU;;;;;;YAAW;;;;;;;AAIvD;KAPgB","debugId":null}},
    {"offset": {"line": 892, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/app/%28login%29/sign-in/page.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { Suspense } from 'react';\n\nimport { Globe } from 'lucide-react';\n\nimport { APP_CONFIG } from '@/config/app-config';\n\nimport { AuthForm } from '../login-form';\nimport { GoogleButton } from '@/components/ui/google-button';\n\nexport default function LoginV2() {\n  return (\n    <>\n      <div className=\"mx-auto flex w-full flex-col justify-center space-y-8 sm:w-[350px]\">\n        <div className=\"space-y-2 text-center\">\n          <h1 className=\"text-3xl font-medium\">Login to your account</h1>\n          <p className=\"text-muted-foreground text-sm\">Please enter your details to login.</p>\n        </div>\n        <div className=\"space-y-4\">\n          <GoogleButton className=\"w-full\" />\n          <div className=\"after:border-border relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t\">\n            <span className=\"bg-background text-muted-foreground relative z-10 px-2\">\n              Or continue with\n            </span>\n          </div>\n          <Suspense fallback={<div>Loading...</div>}>\n            <AuthForm mode=\"signin\" />\n          </Suspense>\n        </div>\n      </div>\n\n      <div className=\"absolute top-5 flex w-full justify-end px-10\">\n        <div className=\"text-muted-foreground text-sm\">\n          Don&apos;t have an account?{' '}\n          <Link className=\"text-foreground\" href=\"sign-up\">\n            Register\n          </Link>\n        </div>\n      </div>\n\n      <div className=\"absolute bottom-5 flex w-full justify-between px-10\">\n        <div className=\"text-sm\">{APP_CONFIG.copyright}</div>\n        <div className=\"flex items-center gap-1 text-sm\">\n          <Globe className=\"text-muted-foreground size-4\" />\n          ENG\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AAVA;;;;;;;;AAYe,SAAS;IACtB,qBACE;;0BACE,4VAAC;gBAAI,WAAU;;kCACb,4VAAC;wBAAI,WAAU;;0CACb,4VAAC;gCAAG,WAAU;0CAAuB;;;;;;0CACrC,4VAAC;gCAAE,WAAU;0CAAgC;;;;;;;;;;;;kCAE/C,4VAAC;wBAAI,WAAU;;0CACb,4VAAC,uJAAA,CAAA,eAAY;gCAAC,WAAU;;;;;;0CACxB,4VAAC;gCAAI,WAAU;0CACb,cAAA,4VAAC;oCAAK,WAAU;8CAAyD;;;;;;;;;;;0CAI3E,4VAAC,4TAAA,CAAA,WAAQ;gCAAC,wBAAU,4VAAC;8CAAI;;;;;;0CACvB,cAAA,4VAAC,oJAAA,CAAA,WAAQ;oCAAC,MAAK;;;;;;;;;;;;;;;;;;;;;;;0BAKrB,4VAAC;gBAAI,WAAU;0BACb,cAAA,4VAAC;oBAAI,WAAU;;wBAAgC;wBACjB;sCAC5B,4VAAC,8SAAA,CAAA,UAAI;4BAAC,WAAU;4BAAkB,MAAK;sCAAU;;;;;;;;;;;;;;;;;0BAMrD,4VAAC;gBAAI,WAAU;;kCACb,4VAAC;wBAAI,WAAU;kCAAW,yIAAA,CAAA,aAAU,CAAC,SAAS;;;;;;kCAC9C,4VAAC;wBAAI,WAAU;;0CACb,4VAAC,2RAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;4BAAiC;;;;;;;;;;;;;;;AAM5D;KAvCwB","debugId":null}}]
}