{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/manrope_73d9b590.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"manrope_73d9b590-module__lplfpW__className\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 11, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/manrope_73d9b590.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22layout.tsx%22,%22import%22:%22Manrope%22,%22arguments%22:[{%22subsets%22:[%22latin%22]}],%22variableName%22:%22manrope%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Manrope', 'Manrope Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,uJAAA,CAAA,UAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,uJAAA,CAAA,UAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,uJAAA,CAAA,UAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/auth/session.ts"],"sourcesContent":["import { compare, hash } from 'bcryptjs';\nimport { SignJWT, jwtVerify } from 'jose';\nimport { cookies } from 'next/headers';\nimport { NewUser } from '@/lib/db/schema';\n\nconst key = new TextEncoder().encode(process.env.AUTH_SECRET);\nconst SALT_ROUNDS = 10;\n\nexport async function hashPassword(password: string) {\n  return hash(password, SALT_ROUNDS);\n}\n\nexport async function comparePasswords(\n  plainTextPassword: string,\n  hashedPassword: string\n) {\n  return compare(plainTextPassword, hashedPassword);\n}\n\ntype SessionData = {\n  user: { id: number };\n  expires: string;\n};\n\nexport async function signToken(payload: SessionData) {\n  return await new SignJWT(payload)\n    .setProtectedHeader({ alg: 'HS256' })\n    .setIssuedAt()\n    .setExpirationTime('1 day from now')\n    .sign(key);\n}\n\nexport async function verifyToken(input: string) {\n  const { payload } = await jwtVerify(input, key, {\n    algorithms: ['HS256'],\n  });\n  return payload as SessionData;\n}\n\nexport async function getSession() {\n  const session = (await cookies()).get('session')?.value;\n  if (!session) return null;\n  return await verifyToken(session);\n}\n\nexport async function setSession(user: NewUser) {\n  const expiresInOneDay = new Date(Date.now() + 24 * 60 * 60 * 1000);\n  const session: SessionData = {\n    user: { id: user.id! },\n    expires: expiresInOneDay.toISOString(),\n  };\n  const encryptedSession = await signToken(session);\n  (await cookies()).set('session', encryptedSession, {\n    expires: expiresInOneDay,\n    httpOnly: true,\n    secure: true,\n    sameSite: 'lax',\n  });\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AAAA;AACA;;;;AAGA,MAAM,MAAM,IAAI,cAAc,MAAM,CAAC,QAAQ,GAAG,CAAC,WAAW;AAC5D,MAAM,cAAc;AAEb,eAAe,aAAa,QAAgB;IACjD,OAAO,CAAA,GAAA,sLAAA,CAAA,OAAI,AAAD,EAAE,UAAU;AACxB;AAEO,eAAe,iBACpB,iBAAyB,EACzB,cAAsB;IAEtB,OAAO,CAAA,GAAA,sLAAA,CAAA,UAAO,AAAD,EAAE,mBAAmB;AACpC;AAOO,eAAe,UAAU,OAAoB;IAClD,OAAO,MAAM,IAAI,sMAAA,CAAA,UAAO,CAAC,SACtB,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,WAAW,GACX,iBAAiB,CAAC,kBAClB,IAAI,CAAC;AACV;AAEO,eAAe,YAAY,KAAa;IAC7C,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,CAAA,GAAA,wMAAA,CAAA,YAAS,AAAD,EAAE,OAAO,KAAK;QAC9C,YAAY;YAAC;SAAQ;IACvB;IACA,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,UAAU,CAAC,MAAM,CAAA,GAAA,8QAAA,CAAA,UAAO,AAAD,GAAG,EAAE,GAAG,CAAC,YAAY;IAClD,IAAI,CAAC,SAAS,OAAO;IACrB,OAAO,MAAM,YAAY;AAC3B;AAEO,eAAe,WAAW,IAAa;IAC5C,MAAM,kBAAkB,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK,KAAK;IAC7D,MAAM,UAAuB;QAC3B,MAAM;YAAE,IAAI,KAAK,EAAE;QAAE;QACrB,SAAS,gBAAgB,WAAW;IACtC;IACA,MAAM,mBAAmB,MAAM,UAAU;IACzC,CAAC,MAAM,CAAA,GAAA,8QAAA,CAAA,UAAO,AAAD,GAAG,EAAE,GAAG,CAAC,WAAW,kBAAkB;QACjD,SAAS;QACT,UAAU;QACV,QAAQ;QACR,UAAU;IACZ;AACF","debugId":null}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/db/schema/users.ts"],"sourcesContent":["import { pgTable, serial, varchar, text, timestamp, integer } from 'drizzle-orm/pg-core';\nimport { relations } from 'drizzle-orm';\n\nexport const users = pgTable('users', {\n  id: serial('id').primaryKey(),\n  name: varchar('name', { length: 100 }),\n  email: varchar('email', { length: 255 }).notNull().unique(),\n  passwordHash: text('password_hash').notNull(),\n  role: varchar('role', { length: 20 }).notNull().default('member'),\n  createdAt: timestamp('created_at').notNull().defaultNow(),\n  updatedAt: timestamp('updated_at').notNull().defaultNow(),\n  deletedAt: timestamp('deleted_at'),\n});\n\nexport const teams = pgTable('teams', {\n  id: serial('id').primaryKey(),\n  name: varchar('name', { length: 100 }).notNull(),\n  createdAt: timestamp('created_at').notNull().defaultNow(),\n  updatedAt: timestamp('updated_at').notNull().defaultNow(),\n  stripeCustomerId: text('stripe_customer_id').unique(),\n  stripeSubscriptionId: text('stripe_subscription_id').unique(),\n  stripeProductId: text('stripe_product_id'),\n  planName: varchar('plan_name', { length: 50 }),\n  subscriptionStatus: varchar('subscription_status', { length: 20 }),\n});\n\nexport const teamMembers = pgTable('team_members', {\n  id: serial('id').primaryKey(),\n  userId: integer('user_id')\n    .notNull()\n    .references(() => users.id),\n  teamId: integer('team_id')\n    .notNull()\n    .references(() => teams.id),\n  role: varchar('role', { length: 50 }).notNull(),\n  joinedAt: timestamp('joined_at').notNull().defaultNow(),\n});\n\nexport const activityLogs = pgTable('activity_logs', {\n  id: serial('id').primaryKey(),\n  teamId: integer('team_id')\n    .notNull()\n    .references(() => teams.id),\n  userId: integer('user_id').references(() => users.id),\n  action: text('action').notNull(),\n  timestamp: timestamp('timestamp').notNull().defaultNow(),\n  ipAddress: varchar('ip_address', { length: 45 }),\n});\n\nexport const invitations = pgTable('invitations', {\n  id: serial('id').primaryKey(),\n  teamId: integer('team_id')\n    .notNull()\n    .references(() => teams.id),\n  email: varchar('email', { length: 255 }).notNull(),\n  role: varchar('role', { length: 50 }).notNull(),\n  invitedBy: integer('invited_by')\n    .notNull()\n    .references(() => users.id),\n  invitedAt: timestamp('invited_at').notNull().defaultNow(),\n  status: varchar('status', { length: 20 }).notNull().default('pending'),\n});\n\n// Relations\nexport const teamsRelations = relations(teams, ({ many }) => ({\n  teamMembers: many(teamMembers),\n  activityLogs: many(activityLogs),\n  invitations: many(invitations),\n}));\n\nexport const usersRelations = relations(users, ({ many }) => ({\n  teamMembers: many(teamMembers),\n  invitationsSent: many(invitations),\n}));\n\nexport const invitationsRelations = relations(invitations, ({ one }) => ({\n  team: one(teams, {\n    fields: [invitations.teamId],\n    references: [teams.id],\n  }),\n  invitedBy: one(users, {\n    fields: [invitations.invitedBy],\n    references: [users.id],\n  }),\n}));\n\nexport const teamMembersRelations = relations(teamMembers, ({ one }) => ({\n  user: one(users, {\n    fields: [teamMembers.userId],\n    references: [users.id],\n  }),\n  team: one(teams, {\n    fields: [teamMembers.teamId],\n    references: [teams.id],\n  }),\n}));\n\nexport const activityLogsRelations = relations(activityLogs, ({ one }) => ({\n  team: one(teams, {\n    fields: [activityLogs.teamId],\n    references: [teams.id],\n  }),\n  user: one(users, {\n    fields: [activityLogs.userId],\n    references: [users.id],\n  }),\n}));\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type NewUser = typeof users.$inferInsert;\nexport type Team = typeof teams.$inferSelect;\nexport type NewTeam = typeof teams.$inferInsert;\nexport type TeamMember = typeof teamMembers.$inferSelect;\nexport type NewTeamMember = typeof teamMembers.$inferInsert;\nexport type ActivityLog = typeof activityLogs.$inferSelect;\nexport type NewActivityLog = typeof activityLogs.$inferInsert;\nexport type Invitation = typeof invitations.$inferSelect;\nexport type NewInvitation = typeof invitations.$inferInsert;\n\nexport type TeamDataWithMembers = Team & {\n  teamMembers: (TeamMember & {\n    user: Pick<User, 'id' | 'name' | 'email'>;\n  })[];\n};\n\nexport enum ActivityType {\n  SIGN_UP = 'SIGN_UP',\n  SIGN_IN = 'SIGN_IN',\n  SIGN_OUT = 'SIGN_OUT',\n  UPDATE_PASSWORD = 'UPDATE_PASSWORD',\n  DELETE_ACCOUNT = 'DELETE_ACCOUNT',\n  UPDATE_ACCOUNT = 'UPDATE_ACCOUNT',\n  CREATE_TEAM = 'CREATE_TEAM',\n  REMOVE_TEAM_MEMBER = 'REMOVE_TEAM_MEMBER',\n  INVITE_TEAM_MEMBER = 'INVITE_TEAM_MEMBER',\n  ACCEPT_INVITATION = 'ACCEPT_INVITATION',\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/db/schema/equipment.ts"],"sourcesContent":["import {\n  pgTable,\n  bigint,\n  timestamp,\n  text,\n  doublePrecision,\n  integer,\n  real,\n  numeric,\n  smallint,\n  unique,\n  foreignKey,\n} from 'drizzle-orm/pg-core';\nimport { relations } from 'drizzle-orm';\nimport { sql } from 'drizzle-orm';\n\nexport const customers = pgTable('Customers', {\n  id: bigint({ mode: 'number' }).primaryKey().generatedByDefaultAsIdentity({\n    name: 'Customers_id_seq',\n    startWith: 1,\n    increment: 1,\n    minValue: 1,\n    maxValue: 9223372036854775807,\n  }),\n  createdAt: timestamp('created_at', { withTimezone: true, mode: 'string' }).defaultNow().notNull(),\n  companyName: text('company_name').notNull(),\n  contactFirstName: text('contact_first_name').notNull(),\n  contactLastName: text('contact_last_name'),\n  phone: text().notNull(),\n  email: text().notNull(),\n});\n\nexport const equipmentSupply = pgTable('Equipment Supply', {\n  id: bigint({ mode: 'number' }).primaryKey().generatedByDefaultAsIdentity({\n    name: 'Equipment Supply_id_seq',\n    startWith: 1,\n    increment: 1,\n    minValue: 1,\n    maxValue: 9223372036854775807,\n  }),\n  createdAt: timestamp('created_at', { withTimezone: true, mode: 'string' }).defaultNow().notNull(),\n  submissionId: text('submission_id').notNull().unique(),\n  status: text().default('Listed').notNull(),\n  company: text().notNull(),\n  phoneNumber: text('phone_number'),\n  email: text(),\n  distanceRadius: integer('distance_radius').notNull(),\n  firstName: text('first_name').notNull(),\n  lastName: text('last_name'),\n  location: text().notNull(),\n  listingPrice: integer('listing_price').notNull(),\n  minimumPrice: integer('minimum_price').notNull(),\n  quantity: smallint().notNull(),\n  availability: text().notNull(),\n  category: text().notNull(),\n  fromDatetime: timestamp('from_datetime', { withTimezone: true, mode: 'string' }),\n  toDatetime: timestamp('to_datetime', { withTimezone: true, mode: 'string' }),\n  geocodeId: bigint('geocode_id', { mode: 'number' }),\n  geocodeLon: doublePrecision('geocode_lon'),\n  geocodeLat: doublePrecision('geocode_lat'),\n});\n\nexport const equipmentBookings = pgTable(\n  'Equipment Bookings',\n  {\n    id: bigint({ mode: 'number' }).primaryKey().generatedByDefaultAsIdentity({\n      name: 'Equipment Bookings_id_seq',\n      startWith: 1,\n      increment: 1,\n      minValue: 1,\n      maxValue: 9223372036854775807,\n    }),\n    createdAt: timestamp('created_at', { withTimezone: true, mode: 'string' })\n      .defaultNow()\n      .notNull(),\n    bookingDate: timestamp('booking_date', { withTimezone: true, mode: 'string' }).notNull(),\n    customer: text().notNull(),\n    supplier: text(),\n    supplierId: bigint('supplier_id', { mode: 'number' }).notNull(),\n    location: text().notNull(),\n    locationLongitude: doublePrecision('location_longitude'),\n    locationLatitude: doublePrecision('location_latitude'),\n    numberEquipment: integer('number_equipment').notNull(),\n    customerRate: real('customer_rate').notNull(),\n    hours: real(),\n    supplierRate: real('supplier_rate').notNull(),\n    sourcerRate: real('sourcer_rate').notNull(),\n    customerId: bigint('customer_id', { mode: 'number' }),\n    operatorFirstName: text('operator_first_name').notNull(),\n    operatorLastName: text('operator_last_name'),\n    bookingGroupId: text('booking_group_id').notNull(),\n    supplierStatus: text('supplier_status').default('active').notNull(),\n    cancellationReason: text('cancellation_reason'),\n    customerStatus: text('customer_status').default('active').notNull(),\n    equipment: text(),\n    totalCustomerCharges: numeric('total_customer_charges').generatedAlwaysAs(\n      sql`((COALESCE(customer_rate, (0)::real) * COALESCE(hours, (0)::real)) * (COALESCE(number_equipment, 0))::double precision)`\n    ),\n    sourcerTotalEarnings: numeric('sourcer_total_earnings').generatedAlwaysAs(\n      sql`((COALESCE(sourcer_rate, (0)::real) * COALESCE(hours, (0)::real)) * (COALESCE(number_equipment, 0))::double precision)`\n    ),\n    totalSupplierEarnings: numeric('total_supplier_earnings').generatedAlwaysAs(\n      sql`((COALESCE(supplier_rate, (0)::real) * COALESCE(hours, (0)::real)) * (COALESCE(number_equipment, 0))::double precision)`\n    ),\n  },\n  table => [\n    foreignKey({\n      columns: [table.supplierId],\n      foreignColumns: [equipmentSupply.id],\n      name: 'Equipment Bookings_supplier_id_fkey',\n    }),\n    unique('Equipment Bookings_id_key').on(table.id),\n  ]\n);\n\n// Relations\nexport const equipmentSupplyRelations = relations(equipmentSupply, ({ many }) => ({\n  bookings: many(equipmentBookings),\n}));\n\nexport const equipmentBookingsRelations = relations(equipmentBookings, ({ one }) => ({\n  supplier: one(equipmentSupply, {\n    fields: [equipmentBookings.supplierId],\n    references: [equipmentSupply.id],\n  }),\n  customer: one(customers, {\n    fields: [equipmentBookings.customerId],\n    references: [customers.id],\n  }),\n}));\n\nexport const customersRelations = relations(customers, ({ many }) => ({\n  bookings: many(equipmentBookings),\n}));\n\n// Types\nexport type Customer = typeof customers.$inferSelect;\nexport type NewCustomer = typeof customers.$inferInsert;\nexport type EquipmentSupply = typeof equipmentSupply.$inferSelect;\nexport type NewEquipmentSupply = typeof equipmentSupply.$inferInsert;\nexport type EquipmentBooking = typeof equipmentBookings.$inferSelect;\nexport type NewEquipmentBooking = typeof equipmentBookings.$inferInsert;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 487, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/db/schema/index.ts"],"sourcesContent":["// Main schema index - exports all tables and types\nexport * from './users';\nexport * from './equipment';\n"],"names":[],"mappings":"AAAA,mDAAmD;;AACnD;AACA","debugId":null}},
    {"offset": {"line": 556, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/db/drizzle.ts"],"sourcesContent":["import { drizzle } from 'drizzle-orm/postgres-js';\nimport postgres from 'postgres';\nimport * as schema from './schema';\nimport dotenv from 'dotenv';\n\ndotenv.config();\n\nif (!process.env.POSTGRES_URL) {\n  throw new Error('POSTGRES_URL environment variable is not set');\n}\n\nexport const client = postgres(process.env.POSTGRES_URL);\nexport const db = drizzle(client, { schema });\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;AACA;;;;;AAEA,yLAAA,CAAA,UAAM,CAAC,MAAM;AAEb,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;IAC7B,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,SAAS,CAAA,GAAA,6LAAA,CAAA,UAAQ,AAAD,EAAE,QAAQ,GAAG,CAAC,YAAY;AAChD,MAAM,KAAK,CAAA,GAAA,gUAAA,CAAA,UAAO,AAAD,EAAE,QAAQ;IAAE,QAAA;AAAO","debugId":null}},
    {"offset": {"line": 581, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/db/queries/users.ts"],"sourcesContent":["import { cookies } from 'next/headers';\nimport { verifyToken } from '@/lib/auth/session';\nimport { db } from '../drizzle';\nimport { users, teamMembers } from '../schema';\nimport { eq, and, isNull } from 'drizzle-orm';\n\nexport async function getUser() {\n  const sessionCookie = (await cookies()).get('session');\n  if (!sessionCookie || !sessionCookie.value) {\n    return null;\n  }\n\n  const sessionData = await verifyToken(sessionCookie.value);\n  if (!sessionData || !sessionData.user || typeof sessionData.user.id !== 'number') {\n    return null;\n  }\n\n  if (new Date(sessionData.expires) < new Date()) {\n    return null;\n  }\n\n  const user = await db\n    .select()\n    .from(users)\n    .where(and(eq(users.id, sessionData.user.id), isNull(users.deletedAt)))\n    .limit(1);\n\n  if (user.length === 0) {\n    return null;\n  }\n\n  return user[0];\n}\n\nexport async function getUserWithTeam(userId: number) {\n  const result = await db\n    .select({\n      user: users,\n      teamId: teamMembers.teamId,\n    })\n    .from(users)\n    .leftJoin(teamMembers, eq(users.id, teamMembers.userId))\n    .where(eq(users.id, userId))\n    .limit(1);\n\n  return result[0];\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AAAA;AACA;;;;;;AAEO,eAAe;IACpB,MAAM,gBAAgB,CAAC,MAAM,CAAA,GAAA,8QAAA,CAAA,UAAO,AAAD,GAAG,EAAE,GAAG,CAAC;IAC5C,IAAI,CAAC,iBAAiB,CAAC,cAAc,KAAK,EAAE;QAC1C,OAAO;IACT;IAEA,MAAM,cAAc,MAAM,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD,EAAE,cAAc,KAAK;IACzD,IAAI,CAAC,eAAe,CAAC,YAAY,IAAI,IAAI,OAAO,YAAY,IAAI,CAAC,EAAE,KAAK,UAAU;QAChF,OAAO;IACT;IAEA,IAAI,IAAI,KAAK,YAAY,OAAO,IAAI,IAAI,QAAQ;QAC9C,OAAO;IACT;IAEA,MAAM,OAAO,MAAM,mIAAA,CAAA,KAAE,CAClB,MAAM,GACN,IAAI,CAAC,2IAAA,CAAA,QAAK,EACV,KAAK,CAAC,CAAA,GAAA,wUAAA,CAAA,MAAG,AAAD,EAAE,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,2IAAA,CAAA,QAAK,CAAC,EAAE,EAAE,YAAY,IAAI,CAAC,EAAE,GAAG,CAAA,GAAA,wUAAA,CAAA,SAAM,AAAD,EAAE,2IAAA,CAAA,QAAK,CAAC,SAAS,IACnE,KAAK,CAAC;IAET,IAAI,KAAK,MAAM,KAAK,GAAG;QACrB,OAAO;IACT;IAEA,OAAO,IAAI,CAAC,EAAE;AAChB;AAEO,eAAe,gBAAgB,MAAc;IAClD,MAAM,SAAS,MAAM,mIAAA,CAAA,KAAE,CACpB,MAAM,CAAC;QACN,MAAM,2IAAA,CAAA,QAAK;QACX,QAAQ,2IAAA,CAAA,cAAW,CAAC,MAAM;IAC5B,GACC,IAAI,CAAC,2IAAA,CAAA,QAAK,EACV,QAAQ,CAAC,2IAAA,CAAA,cAAW,EAAE,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,2IAAA,CAAA,QAAK,CAAC,EAAE,EAAE,2IAAA,CAAA,cAAW,CAAC,MAAM,GACrD,KAAK,CAAC,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,2IAAA,CAAA,QAAK,CAAC,EAAE,EAAE,SACnB,KAAK,CAAC;IAET,OAAO,MAAM,CAAC,EAAE;AAClB","debugId":null}},
    {"offset": {"line": 625, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/db/queries/teams.ts"],"sourcesContent":["import { db } from '../drizzle';\nimport { teams, teamMembers } from '../schema';\nimport { eq } from 'drizzle-orm';\nimport { getUser } from './users';\n\nexport async function getTeamByStripeCustomerId(customerId: string) {\n  const result = await db\n    .select()\n    .from(teams)\n    .where(eq(teams.stripeCustomerId, customerId))\n    .limit(1);\n\n  return result.length > 0 ? result[0] : null;\n}\n\nexport async function updateTeamSubscription(\n  teamId: number,\n  subscriptionData: {\n    stripeSubscriptionId: string | null;\n    stripeProductId: string | null;\n    planName: string | null;\n    subscriptionStatus: string;\n  }\n) {\n  await db\n    .update(teams)\n    .set({\n      ...subscriptionData,\n      updatedAt: new Date(),\n    })\n    .where(eq(teams.id, teamId));\n}\n\nexport async function getTeamForUser() {\n  const user = await getUser();\n  if (!user) {\n    return null;\n  }\n\n  const result = await db.query.teamMembers.findFirst({\n    where: eq(teamMembers.userId, user.id),\n    with: {\n      team: {\n        with: {\n          teamMembers: {\n            with: {\n              user: {\n                columns: {\n                  id: true,\n                  name: true,\n                  email: true,\n                },\n              },\n            },\n          },\n        },\n      },\n    },\n  });\n\n  return result?.team || null;\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;AAEO,eAAe,0BAA0B,UAAkB;IAChE,MAAM,SAAS,MAAM,mIAAA,CAAA,KAAE,CACpB,MAAM,GACN,IAAI,CAAC,2IAAA,CAAA,QAAK,EACV,KAAK,CAAC,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,2IAAA,CAAA,QAAK,CAAC,gBAAgB,EAAE,aACjC,KAAK,CAAC;IAET,OAAO,OAAO,MAAM,GAAG,IAAI,MAAM,CAAC,EAAE,GAAG;AACzC;AAEO,eAAe,uBACpB,MAAc,EACd,gBAKC;IAED,MAAM,mIAAA,CAAA,KAAE,CACL,MAAM,CAAC,2IAAA,CAAA,QAAK,EACZ,GAAG,CAAC;QACH,GAAG,gBAAgB;QACnB,WAAW,IAAI;IACjB,GACC,KAAK,CAAC,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,2IAAA,CAAA,QAAK,CAAC,EAAE,EAAE;AACxB;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM,CAAA,GAAA,4IAAA,CAAA,UAAO,AAAD;IACzB,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,MAAM,SAAS,MAAM,mIAAA,CAAA,KAAE,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC;QAClD,OAAO,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,2IAAA,CAAA,cAAW,CAAC,MAAM,EAAE,KAAK,EAAE;QACrC,MAAM;YACJ,MAAM;gBACJ,MAAM;oBACJ,aAAa;wBACX,MAAM;4BACJ,MAAM;gCACJ,SAAS;oCACP,IAAI;oCACJ,MAAM;oCACN,OAAO;gCACT;4BACF;wBACF;oBACF;gBACF;YACF;QACF;IACF;IAEA,OAAO,QAAQ,QAAQ;AACzB","debugId":null}},
    {"offset": {"line": 680, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/db/queries/activity.ts"],"sourcesContent":["import { db } from '../drizzle';\nimport { activityLogs, users } from '../schema';\nimport { eq, desc } from 'drizzle-orm';\nimport { getUser } from './users';\n\nexport async function getActivityLogs() {\n  const user = await getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  return await db\n    .select({\n      id: activityLogs.id,\n      action: activityLogs.action,\n      timestamp: activityLogs.timestamp,\n      ipAddress: activityLogs.ipAddress,\n      userName: users.name,\n    })\n    .from(activityLogs)\n    .leftJoin(users, eq(activityLogs.userId, users.id))\n    .where(eq(activityLogs.userId, user.id))\n    .orderBy(desc(activityLogs.timestamp))\n    .limit(10);\n}\n"],"names":[],"mappings":";;;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM,CAAA,GAAA,4IAAA,CAAA,UAAO,AAAD;IACzB,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,MAAM,mIAAA,CAAA,KAAE,CACZ,MAAM,CAAC;QACN,IAAI,2IAAA,CAAA,eAAY,CAAC,EAAE;QACnB,QAAQ,2IAAA,CAAA,eAAY,CAAC,MAAM;QAC3B,WAAW,2IAAA,CAAA,eAAY,CAAC,SAAS;QACjC,WAAW,2IAAA,CAAA,eAAY,CAAC,SAAS;QACjC,UAAU,2IAAA,CAAA,QAAK,CAAC,IAAI;IACtB,GACC,IAAI,CAAC,2IAAA,CAAA,eAAY,EACjB,QAAQ,CAAC,2IAAA,CAAA,QAAK,EAAE,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,2IAAA,CAAA,eAAY,CAAC,MAAM,EAAE,2IAAA,CAAA,QAAK,CAAC,EAAE,GAChD,KAAK,CAAC,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,2IAAA,CAAA,eAAY,CAAC,MAAM,EAAE,KAAK,EAAE,GACrC,OAAO,CAAC,CAAA,GAAA,oUAAA,CAAA,OAAI,AAAD,EAAE,2IAAA,CAAA,eAAY,CAAC,SAAS,GACnC,KAAK,CAAC;AACX","debugId":null}},
    {"offset": {"line": 710, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/db/queries/customer.ts"],"sourcesContent":["import { db } from '../drizzle';\nimport { customers } from '../schema';\nimport { eq, sql, desc } from 'drizzle-orm';\nimport { getUser } from './users';\n\n/**\n * Get customer information for the currently logged-in user by matching email\n */\nexport async function getCustomerForCurrentUser() {\n  const user = await getUser();\n  if (!user || !user.email) {\n    return null;\n  }\n\n  const result = await db.select().from(customers).where(eq(customers.email, user.email)).limit(1);\n\n  return result.length > 0 ? result[0] : null;\n}\n\n/**\n * Get customer by email\n */\nexport async function getCustomerByEmail(email: string) {\n  const result = await db.select().from(customers).where(eq(customers.email, email)).limit(1);\n\n  return result.length > 0 ? result[0] : null;\n}\n\n/**\n * Get a customer by ID\n */\nexport async function getCustomerById(customerId: number) {\n  const result = await db.select().from(customers).where(eq(customers.id, customerId)).limit(1);\n\n  return result.length > 0 ? result[0] : null;\n}\n\n/**\n * Get all customers\n */\nexport async function getAllCustomers() {\n  return await db.select().from(customers).orderBy(desc(customers.createdAt));\n}\n\n/**\n * Search customers by company name\n */\nexport async function searchCustomersByName(searchTerm: string) {\n  return await db\n    .select()\n    .from(customers)\n    .where(sql`${customers.companyName} ILIKE ${`%${searchTerm}%`}`)\n    .orderBy(customers.companyName);\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;;;;;AAKO,eAAe;IACpB,MAAM,OAAO,MAAM,CAAA,GAAA,4IAAA,CAAA,UAAO,AAAD;IACzB,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE;QACxB,OAAO;IACT;IAEA,MAAM,SAAS,MAAM,mIAAA,CAAA,KAAE,CAAC,MAAM,GAAG,IAAI,CAAC,+IAAA,CAAA,YAAS,EAAE,KAAK,CAAC,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,+IAAA,CAAA,YAAS,CAAC,KAAK,EAAE,KAAK,KAAK,GAAG,KAAK,CAAC;IAE9F,OAAO,OAAO,MAAM,GAAG,IAAI,MAAM,CAAC,EAAE,GAAG;AACzC;AAKO,eAAe,mBAAmB,KAAa;IACpD,MAAM,SAAS,MAAM,mIAAA,CAAA,KAAE,CAAC,MAAM,GAAG,IAAI,CAAC,+IAAA,CAAA,YAAS,EAAE,KAAK,CAAC,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,+IAAA,CAAA,YAAS,CAAC,KAAK,EAAE,QAAQ,KAAK,CAAC;IAEzF,OAAO,OAAO,MAAM,GAAG,IAAI,MAAM,CAAC,EAAE,GAAG;AACzC;AAKO,eAAe,gBAAgB,UAAkB;IACtD,MAAM,SAAS,MAAM,mIAAA,CAAA,KAAE,CAAC,MAAM,GAAG,IAAI,CAAC,+IAAA,CAAA,YAAS,EAAE,KAAK,CAAC,CAAA,GAAA,wUAAA,CAAA,KAAE,AAAD,EAAE,+IAAA,CAAA,YAAS,CAAC,EAAE,EAAE,aAAa,KAAK,CAAC;IAE3F,OAAO,OAAO,MAAM,GAAG,IAAI,MAAM,CAAC,EAAE,GAAG;AACzC;AAKO,eAAe;IACpB,OAAO,MAAM,mIAAA,CAAA,KAAE,CAAC,MAAM,GAAG,IAAI,CAAC,+IAAA,CAAA,YAAS,EAAE,OAAO,CAAC,CAAA,GAAA,oUAAA,CAAA,OAAI,AAAD,EAAE,+IAAA,CAAA,YAAS,CAAC,SAAS;AAC3E;AAKO,eAAe,sBAAsB,UAAkB;IAC5D,OAAO,MAAM,mIAAA,CAAA,KAAE,CACZ,MAAM,GACN,IAAI,CAAC,+IAAA,CAAA,YAAS,EACd,KAAK,CAAC,kTAAA,CAAA,MAAG,CAAC,EAAE,+IAAA,CAAA,YAAS,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,EAC9D,OAAO,CAAC,+IAAA,CAAA,YAAS,CAAC,WAAW;AAClC","debugId":null}},
    {"offset": {"line": 754, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/db/queries/equipment.ts"],"sourcesContent":["import { db } from '../drizzle';\nimport { equipmentBookings, equipmentSupply, customers } from '../schema';\nimport { eq, desc } from 'drizzle-orm';\nimport { getUser } from './users';\n\n/**\n * Get equipment bookings for a specific user (by email match)\n * Assumes the user's email is stored in equipment supply records\n */\nexport async function getEquipmentBookingsForUser(userEmail: string) {\n  const result = await db\n    .select({\n      booking: equipmentBookings,\n      supply: equipmentSupply,\n    })\n    .from(equipmentBookings)\n    .innerJoin(equipmentSupply, eq(equipmentBookings.supplierId, equipmentSupply.id))\n    .where(eq(equipmentSupply.email, userEmail))\n    .orderBy(desc(equipmentBookings.bookingDate));\n\n  return result;\n}\n\n/**\n * Get equipment bookings for the currently logged-in user\n */\nexport async function getEquipmentBookingsForCurrentUser() {\n  const user = await getUser();\n  if (!user || !user.email) {\n    return [];\n  }\n\n  return await getEquipmentBookingsForUser(user.email);\n}\n\n/**\n * Get all equipment bookings with supplier and customer details\n */\nexport async function getAllEquipmentBookings() {\n  const result = await db\n    .select({\n      booking: equipmentBookings,\n      supply: equipmentSupply,\n      customer: customers,\n    })\n    .from(equipmentBookings)\n    .leftJoin(equipmentSupply, eq(equipmentBookings.supplierId, equipmentSupply.id))\n    .leftJoin(customers, eq(equipmentBookings.customerId, customers.id))\n    .orderBy(desc(equipmentBookings.bookingDate));\n\n  return result;\n}\n\n/**\n * Get equipment bookings by company/customer ID\n */\nexport async function getEquipmentBookingsByCompanyId(companyId: number) {\n  const result = await db\n    .select({\n      booking: equipmentBookings,\n      supply: equipmentSupply,\n    })\n    .from(equipmentBookings)\n    .leftJoin(equipmentSupply, eq(equipmentBookings.supplierId, equipmentSupply.id))\n    .where(eq(equipmentBookings.customerId, companyId))\n    .orderBy(desc(equipmentBookings.bookingDate));\n\n  return result;\n}\n\n/**\n * Get equipment supply listings\n */\nexport async function getEquipmentSupplyListings(filters?: { status?: string; category?: string }) {\n  let query = db.select().from(equipmentSupply);\n\n  if (filters?.status) {\n    query = query.where(eq(equipmentSupply.status, filters.status)) as any;\n  }\n\n  return await query.orderBy(desc(equipmentSupply.createdAt));\n}\n\n/**\n * Get equipment supply by submission ID\n */\nexport async function getEquipmentSupplyBySubmissionId(submissionId: string) {\n  const result = await db\n    .select()\n    .from(equipmentSupply)\n    .where(eq(equipmentSupply.submissionId, submissionId))\n    .limit(1);\n\n  return result.length > 0 ? result[0] : null;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 816, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/lib/db/queries/index.ts"],"sourcesContent":["// Main queries index - exports all query functions\nexport * from './users';\nexport * from './teams';\nexport * from './activity';\nexport * from './customer';\nexport * from './equipment';\n"],"names":[],"mappings":"AAAA,mDAAmD;;AACnD;AACA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 846, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/config/app-config.ts"],"sourcesContent":["import packageJson from '../package.json';\n\nconst currentYear = new Date().getFullYear();\n\nexport const APP_CONFIG = {\n  name: 'FleetLink',\n  version: packageJson.version,\n  copyright: `Â© ${currentYear}, FleetLink.`,\n  meta: {\n    title: 'FleetLink - Reliable Equipment Rental',\n    description:\n      'FleetLink is a modern fully automated construction equipment rental platform. It handles all the payment and management processes so you can focus on your projects.',\n  },\n};\n\nexport const adminRedirectPath = '/admin/';\nexport const loginRedirectPath = '/dashboard/';\nexport const logoutRedirectPath = '/';\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,cAAc,IAAI,OAAO,WAAW;AAEnC,MAAM,aAAa;IACxB,MAAM;IACN,SAAS,8FAAA,CAAA,UAAW,CAAC,OAAO;IAC5B,WAAW,CAAC,EAAE,EAAE,YAAY,YAAY,CAAC;IACzC,MAAM;QACJ,OAAO;QACP,aACE;IACJ;AACF;AAEO,MAAM,oBAAoB;AAC1B,MAAM,oBAAoB;AAC1B,MAAM,qBAAqB","debugId":null}},
    {"offset": {"line": 871, "column": 0}, "map": {"version":3,"sources":["file:///home/donald/git/locationBackend/apps/web/app/layout.tsx"],"sourcesContent":["import './globals.css';\nimport type { Metadata, Viewport } from 'next';\nimport { Manrope } from 'next/font/google';\nimport { getUser, getTeamForUser } from '@/lib/db/queries';\nimport { SWRConfig } from 'swr';\nimport { APP_CONFIG } from '@/config/app-config';\n\nexport const metadata: Metadata = {\n  title: APP_CONFIG.meta.title,\n  description: APP_CONFIG.meta.description,\n};\n\nexport const viewport: Viewport = {\n  maximumScale: 1,\n};\n\nconst manrope = Manrope({ subsets: ['latin'] });\n\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <html\n      lang=\"en\"\n      className={`bg-white dark:bg-gray-950 text-black dark:text-white ${manrope.className}`}\n    >\n      <body className=\"min-h-[100dvh]\">\n        <SWRConfig\n          value={{\n            fallback: {\n              // We do NOT await here\n              // Only components that read this data will suspend\n              '/api/user': getUser(),\n              '/api/team': getTeamForUser(),\n            },\n          }}\n        >\n          {children}\n        </SWRConfig>\n      </body>\n    </html>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAGA;AAAA;AAAA;AACA;AACA;;;;;;;AAEO,MAAM,WAAqB;IAChC,OAAO,sIAAA,CAAA,aAAU,CAAC,IAAI,CAAC,KAAK;IAC5B,aAAa,sIAAA,CAAA,aAAU,CAAC,IAAI,CAAC,WAAW;AAC1C;AAEO,MAAM,WAAqB;IAChC,cAAc;AAChB;AAIe,SAAS,WAAW,EAAE,QAAQ,EAAiC;IAC5E,qBACE,6XAAC;QACC,MAAK;QACL,WAAW,CAAC,qDAAqD,EAAE,2IAAA,CAAA,UAAO,CAAC,SAAS,EAAE;kBAEtF,cAAA,6XAAC;YAAK,WAAU;sBACd,cAAA,6XAAC,0QAAA,CAAA,YAAS;gBACR,OAAO;oBACL,UAAU;wBACR,uBAAuB;wBACvB,mDAAmD;wBACnD,aAAa,CAAA,GAAA,4IAAA,CAAA,UAAO,AAAD;wBACnB,aAAa,CAAA,GAAA,4IAAA,CAAA,iBAAc,AAAD;oBAC5B;gBACF;0BAEC;;;;;;;;;;;;;;;;AAKX","debugId":null}}]
}